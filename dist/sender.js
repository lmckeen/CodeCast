!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var n in o)("object"==typeof exports?exports:e)[n]=o[n]}}(self,(function(){return(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{CodeCast:()=>w});const o={};function n(e){const t=new Promise(((t,n)=>{o[e]={resolve:t,reject:n}}));return o[e].promise=t,o[e]}function r(){return`CodeCast_${Math.random()}`}function s(e,t=25e3){const o=[];for(;""!==e;)o.push(e.slice(0,t)),e=e.slice(t);return o}let c=!1;function i(){return c}function a(e){c=e}const d=[];async function f(e){if("string"!=typeof e)throw Error("No URL provided to send method");return u(await(await fetch(e)).text())}function u(e){if("string"!=typeof e)throw Error("No JS string provided to sendString method");const t=r();return d.push({id:t,code:e}),i()?(l(),n(t).promise):n(t).promise}function l(){if(!i())throw Error("RemotePlayer Not Connected Yet");for(;d.length>0;){const e=d.shift();S(e.id,s(e.code))}}let m;function p(e,t){const{id:n,data:r}=JSON.parse(t);!function(e,t){o[e].resolve(t)}(n,r)}function g(e,t){const{id:n,error:r}=JSON.parse(t);!function(e,t){o[e].reject(t)}(n,r)}function y(){a(!0),l()}function h(){m&&m.sendMessage("urn:x-cast:com.codecast.reload",{})}function S(e,t=[]){m&&t.forEach(((o,n)=>{const s=t.length;!function(e={id:r()}){m&&m.sendMessage("urn:x-cast:com.codecast.send",e)}({code:o,id:e,index:n,length:s})}))}function v(e){e&&(m=e,m.addMessageListener("urn:x-cast:com.codecast.connected",y),m.addMessageListener("urn:x-cast:com.codecast.resolve",p),m.addMessageListener("urn:x-cast:com.codecast.reject",g))}class w{#shouldReload;constructor(e){const t=new cast.framework.RemotePlayer,o=new cast.framework.RemotePlayerController(t),n=cast.framework.RemotePlayerEventType,r=cast.framework.CastContext.getInstance();this.#shouldReload=e??!0,a(t.isConnected??!1),o.addEventListener(n.IS_CONNECTED_CHANGED,(e=>{const t=r.getCurrentSession();a(e.value),v(t),"SESSION_RESUMED"===t?.getSessionState()&&this.#shouldReload&&(h(),a(!1))}))}send=f;sendString=u;reload(){a(!1),h()}}return t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VuZGVyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29kZWNhc3Qvc2VuZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sdCk7ZWxzZXt2YXIgbz10KCk7Zm9yKHZhciBuIGluIG8pKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6ZSlbbl09b1tuXX19KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e2Q6KHQsbyk9Pntmb3IodmFyIG4gaW4gbyllLm8obyxuKSYmIWUubyh0LG4pJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLHtlbnVtZXJhYmxlOiEwLGdldDpvW25dfSl9LG86KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpLHI6ZT0+e1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9fSx0PXt9O2Uucih0KSxlLmQodCx7Q29kZUNhc3Q6KCk9Pnd9KTtjb25zdCBvPXt9O2Z1bmN0aW9uIG4oZSl7Y29uc3QgdD1uZXcgUHJvbWlzZSgoKHQsbik9PntvW2VdPXtyZXNvbHZlOnQscmVqZWN0Om59fSkpO3JldHVybiBvW2VdLnByb21pc2U9dCxvW2VdfWZ1bmN0aW9uIHIoKXtyZXR1cm5gQ29kZUNhc3RfJHtNYXRoLnJhbmRvbSgpfWB9ZnVuY3Rpb24gcyhlLHQ9MjVlMyl7Y29uc3Qgbz1bXTtmb3IoO1wiXCIhPT1lOylvLnB1c2goZS5zbGljZSgwLHQpKSxlPWUuc2xpY2UodCk7cmV0dXJuIG99bGV0IGM9ITE7ZnVuY3Rpb24gaSgpe3JldHVybiBjfWZ1bmN0aW9uIGEoZSl7Yz1lfWNvbnN0IGQ9W107YXN5bmMgZnVuY3Rpb24gZihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBFcnJvcihcIk5vIFVSTCBwcm92aWRlZCB0byBzZW5kIG1ldGhvZFwiKTtyZXR1cm4gdShhd2FpdChhd2FpdCBmZXRjaChlKSkudGV4dCgpKX1mdW5jdGlvbiB1KGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IEVycm9yKFwiTm8gSlMgc3RyaW5nIHByb3ZpZGVkIHRvIHNlbmRTdHJpbmcgbWV0aG9kXCIpO2NvbnN0IHQ9cigpO3JldHVybiBkLnB1c2goe2lkOnQsY29kZTplfSksaSgpPyhsKCksbih0KS5wcm9taXNlKTpuKHQpLnByb21pc2V9ZnVuY3Rpb24gbCgpe2lmKCFpKCkpdGhyb3cgRXJyb3IoXCJSZW1vdGVQbGF5ZXIgTm90IENvbm5lY3RlZCBZZXRcIik7Zm9yKDtkLmxlbmd0aD4wOyl7Y29uc3QgZT1kLnNoaWZ0KCk7UyhlLmlkLHMoZS5jb2RlKSl9fWxldCBtO2Z1bmN0aW9uIHAoZSx0KXtjb25zdHtpZDpuLGRhdGE6cn09SlNPTi5wYXJzZSh0KTshZnVuY3Rpb24oZSx0KXtvW2VdLnJlc29sdmUodCl9KG4scil9ZnVuY3Rpb24gZyhlLHQpe2NvbnN0e2lkOm4sZXJyb3I6cn09SlNPTi5wYXJzZSh0KTshZnVuY3Rpb24oZSx0KXtvW2VdLnJlamVjdCh0KX0obixyKX1mdW5jdGlvbiB5KCl7YSghMCksbCgpfWZ1bmN0aW9uIGgoKXttJiZtLnNlbmRNZXNzYWdlKFwidXJuOngtY2FzdDpjb20uY29kZWNhc3QucmVsb2FkXCIse30pfWZ1bmN0aW9uIFMoZSx0PVtdKXttJiZ0LmZvckVhY2goKChvLG4pPT57Y29uc3Qgcz10Lmxlbmd0aDshZnVuY3Rpb24oZT17aWQ6cigpfSl7bSYmbS5zZW5kTWVzc2FnZShcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnNlbmRcIixlKX0oe2NvZGU6byxpZDplLGluZGV4Om4sbGVuZ3RoOnN9KX0pKX1mdW5jdGlvbiB2KGUpe2UmJihtPWUsbS5hZGRNZXNzYWdlTGlzdGVuZXIoXCJ1cm46eC1jYXN0OmNvbS5jb2RlY2FzdC5jb25uZWN0ZWRcIix5KSxtLmFkZE1lc3NhZ2VMaXN0ZW5lcihcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnJlc29sdmVcIixwKSxtLmFkZE1lc3NhZ2VMaXN0ZW5lcihcInVybjp4LWNhc3Q6Y29tLmNvZGVjYXN0LnJlamVjdFwiLGcpKX1jbGFzcyB3eyNzaG91bGRSZWxvYWQ7Y29uc3RydWN0b3IoZSl7Y29uc3QgdD1uZXcgY2FzdC5mcmFtZXdvcmsuUmVtb3RlUGxheWVyLG89bmV3IGNhc3QuZnJhbWV3b3JrLlJlbW90ZVBsYXllckNvbnRyb2xsZXIodCksbj1jYXN0LmZyYW1ld29yay5SZW1vdGVQbGF5ZXJFdmVudFR5cGUscj1jYXN0LmZyYW1ld29yay5DYXN0Q29udGV4dC5nZXRJbnN0YW5jZSgpO3RoaXMuI3Nob3VsZFJlbG9hZD1lPz8hMCxhKHQuaXNDb25uZWN0ZWQ/PyExKSxvLmFkZEV2ZW50TGlzdGVuZXIobi5JU19DT05ORUNURURfQ0hBTkdFRCwoZT0+e2NvbnN0IHQ9ci5nZXRDdXJyZW50U2Vzc2lvbigpO2EoZS52YWx1ZSksdih0KSxcIlNFU1NJT05fUkVTVU1FRFwiPT09dD8uZ2V0U2Vzc2lvblN0YXRlKCkmJnRoaXMuI3Nob3VsZFJlbG9hZCYmKGgoKSxhKCExKSl9KSl9c2VuZD1mO3NlbmRTdHJpbmc9dTtyZWxvYWQoKXthKCExKSxoKCl9fXJldHVybiB0fSkoKX0pKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9